<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <!-- Botón para crear un nuevo informe -->
  <div *ngIf="!isObserver">
    <button type="button" class="btn btn-dark" (click)="initDialog()">
      <i class="fa fa-plus-circle mr-2 fa-lg"></i>
      <span i18n="@@tituloNuevoInforme">Nuevo informe</span>
    </button>
  </div>

  <!-- Barra de Tags -->
  <div *ngIf="tags.length !== 2" class="ml-3">
    <div class="navbar-text mr-2">Tags:</div>
    <div class="btn-group" role="group">
      <button
        type="button"
        class="btn btn-outline-light"
        *ngFor="let tag of tags"
        [class.active]="
          selectedTag === tag.value || (tag.value === null && selectedTag === 0)
        "
        (click)="filterDashboards(tag)"
      >
        {{ tag.label }}
      </button>
    </div>
  </div>

  <!-- Filtro de Tipos de Informe -->
  <!-- <div class="btn-group ml-3" role="group">
    <button type="button" class="btn btn-outline-light"
            *ngFor="let type of reportTypes"
            [class.active]="selectedTypes.includes(type)"
            (click)="toggleReportType(type)">
      {{ type }}
    </button>
  </div> -->

  <!-- Buscador -->
  <div class="ml-auto">
    <div class="input-group">
      <input
        type="text"
        class="form-control"
        id="buscador"
        name="buscador"
        (keyup)="filterTitle($event)"
        i18n-placeholder="@@buscarPorNombre"
        placeholder="Buscar por nombre del informe"
      />
      <div class="input-group-prepend">
        <span class="input-group-text bg-dark border-0">
          <i class="fa fa-search"></i>
        </span>
      </div>
    </div>
  </div>
</nav>

<!-- Inicio de la tabla de Bootstrap -->
<div class="container md-10">
  <table class="table table-striped" id="report-table">
    <thead>
      <tr>
        <th (click)="sortTable('config.title')">
          Nombre del Informe
          <i class="fa" [ngClass]="{'fa-sort-asc': sortColumn === 'config.title' && sortDirection === 'asc', 'fa-sort-desc': sortColumn === 'config.title' && sortDirection === 'desc'}"></i>
        </th>
        <th (click)="sortTable('type')">
          Tipo
          <i class="fa" [ngClass]="{'fa-sort-asc': sortColumn === 'type' && sortDirection === 'asc', 'fa-sort-desc': sortColumn === 'type' && sortDirection === 'desc'}"></i>
        </th>
        <th (click)="sortTable('user')">
          Autor
          <i class="fa" [ngClass]="{'fa-sort-asc': sortColumn === 'user' && sortDirection === 'asc', 'fa-sort-desc': sortColumn === 'user' && sortDirection === 'desc'}"></i>
        </th>
        <th>Fecha creación</th>
        <th>Edición privada</th>
        <th>Grupos</th>
        <th (click)="sortTable('config.tag')">
          Etiquetas
          <i class="fa" [ngClass]="{'fa-sort-asc': sortColumn === 'config.tag' && sortDirection === 'asc', 'fa-sort-desc': sortColumn === 'config.tag' && sortDirection === 'desc'}"></i>
        </th>
        <th>Acciones</th>



      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let dashboard of visibleDashboards">
        <td (click)="goToDashboard(dashboard)" class="pointer">
          {{ dashboard.config.title }}
        </td>
        <td>
          <i class="fa fa-circle" [ngClass]="{
            'text-danger': dashboard.type === 'public',
            'text-primary': dashboard.type === 'common',
            'text-default': dashboard.type === 'group' || dashboard.type === 'private'
          }"></i>
          {{ dashboard.type | titlecase }}
        </td>
        <td>{{ getAuthorName(dashboard.user) }}</td>
        <td></td>
        <td></td>
        <td>{{ dashboard.group ? getGroupsNamesByDashboard([dashboard.group]) : '' }}</td>
        <td><span class="badge badge-primary">{{ dashboard.config.tag }}</span></td>
        <td>
          <span
            *ngIf="!isObserver && canIEdit(dashboard)"
            (click)="deleteDashboard(dashboard)"
            class="pointer"
          >
            <i class="fa fa-trash text-danger"></i>
          </span>
          <span
            *ngIf="!isObserver && canIEdit(dashboard)"
            (click)="clone(dashboard)"
            class="pointer"
          >
            <i class="fa fa-clone text-info"></i>
          </span>
        </td>

      </tr>
    </tbody>
  </table>
</div>
<!-- Fin de la tabla de Bootstrap -->


<app-create-dashboard
  *ngIf="dashController"
  [controller]="dashController"
></app-create-dashboard>


