<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <!-- Botón para crear un nuevo informe -->
  <div *ngIf="!isObserver">
    <button type="button" class="btn btn-dark" (click)="initDialog()">
      <i class="fa fa-plus-circle mr-2"></i>
      <span i18n="@@tituloNuevoInforme">CREAR UN NUEVO INFORME</span>
    </button>
  </div>

  <!-- Barra de Tags -->
  <div *ngIf="tags.length !== 2" class="ml-3">
    <div class="navbar-text mr-2">Tags:</div>
    <div class="btn-group" role="group">
      <button
        type="button"
        class="btn btn-outline-light"
        *ngFor="let tag of tags"
        [class.active]="
          selectedTag === tag.value || (tag.value === null && selectedTag === 0)
        "
        (click)="filterDashboards(tag)"
      >
        {{ tag.label }}
      </button>
    </div>
  </div>

  <!-- Filtro de Tipos de Informe -->
  <!-- <div class="btn-group ml-3" role="group">
    <button type="button" class="btn btn-outline-light"
            *ngFor="let type of reportTypes"
            [class.active]="selectedTypes.includes(type)"
            (click)="toggleReportType(type)">
      {{ type }}
    </button>
  </div> -->

  <!-- Buscador -->
  <div class="ml-auto">
    <div class="input-group">
      <input
        type="text"
        class="form-control"
        id="buscador"
        name="buscador"
        (keyup)="filterTitle($event)"
        i18n-placeholder="@@buscarPorNombre"
        placeholder="Buscar por nombre del informe"
      />
      <div class="input-group-prepend">
        <span class="input-group-text bg-dark border-0">
          <i class="fa fa-search"></i>
        </span>
      </div>
    </div>
  </div>
</nav>

<!-- Inicio de la tabla de Bootstrap -->
<div class="container mt-4">
  <table class="table table-striped" id="report-table">
    <thead>
      <tr>
        <th>Nombre del Informe</th>
        <th>Tipo</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <!-- Informes Públicos -->
      <ng-container *ngFor="let dashboard of visibleDashboards.shared">
        <tr>
          <td (click)="goToDashboard(dashboard)" class="pointer">
            {{ dashboard.config.title }}
          </td>
          <td><i class="fa fa-circle text-danger"></i> Público</td>
          <td>
            <span
              *ngIf="!isObserver && canIEdit(dashboard)"
              (click)="deleteDashboard(dashboard)"
              class="pointer"
            >
              <i class="fa fa-trash text-danger"></i>
            </span>
          </td>
        </tr>
      </ng-container>

      <!-- Informes Comunes -->
      <ng-container *ngFor="let dashboard of visibleDashboards.publics">
        <tr>
          <td (click)="goToDashboard(dashboard)" class="pointer">
            {{ dashboard.config.title }}
          </td>
          <td><i class="fa fa-circle text-primary"></i> Común</td>
          <td>
            <span
              *ngIf="!isObserver && canIEdit(dashboard)"
              (click)="deleteDashboard(dashboard)"
              class="pointer"
            >
              <i class="fa fa-trash text-danger"></i>
            </span>
          </td>
        </tr>
      </ng-container>

      <!-- Informes de Grupos -->
      <ng-container *ngFor="let group of groups">
        <ng-container
          *ngFor="
            let dashboard of visibleDashboards.grups | ids : 'group' : group
          "
        >
          <tr>
            <td (click)="goToDashboard(dashboard)" class="pointer">
              {{ dashboard.config.title }}
            </td>
            <td><i class="fa fa-circle text-default"> </i>Mis Grupos</td>
            <td>
              <span
                *ngIf="!isObserver && canIEdit(dashboard)"
                (click)="deleteDashboard(dashboard)"
                class="pointer"
              >
                <i class="fa fa-trash text-danger"></i>
              </span>
            </td>
          </tr>
        </ng-container>
      </ng-container>

      <!-- Informes Privados -->
      <ng-container *ngFor="let dashboard of visibleDashboards.privats">
        <tr>
          <td (click)="goToDashboard(dashboard)" class="pointer">
            {{ dashboard.config.title }}
          </td>
          <td> <i class="fa fa-circle text-default"></i> Privado</td>
          <td>
            <span
              *ngIf="!isObserver && canIEdit(dashboard)"
              (click)="deleteDashboard(dashboard)"
              class="pointer"
            >
              <i class="fa fa-trash text-danger"></i>
            </span>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
<!-- Fin de la tabla de Bootstrap -->

<app-create-dashboard
  *ngIf="dashController"
  [controller]="dashController"
></app-create-dashboard>
